<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fault Tolerance | K8s Resiliency Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-link.active-page { background-color: #E0E7FF; color: #3730A3; font-weight: 600; }
        .nav-category-header { cursor: pointer; }
        .arrow.rotate-180 { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-stone-50 text-stone-800">
    <div class="flex">
        <aside class="sticky top-0 h-screen w-72 bg-white shadow-md p-5 hidden lg:flex flex-col">
            <!-- Master Navigation Start -->
            <div class="flex items-center gap-4 mb-8">
                <div class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center text-white text-xl font-bold">NS</div>
                <div>
                    <h2 class="text-lg font-bold text-indigo-900">Nikhil Sharma</h2>
                    <a href="https://www.linkedin.com/in/nikhilsharmait/" target="_blank" rel="noopener noreferrer" class="text-sm text-indigo-500 hover:underline flex items-center gap-1">
                        LinkedIn Profile
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                    </a>
                </div>
            </div>
            <nav id="main-nav" class="flex-grow space-y-2 overflow-y-auto">
                <a href="index.html" class="nav-link block w-full text-left p-2 rounded-md text-stone-700 font-semibold hover:bg-stone-100 transition-colors">About Me</a>
                <a href="#" class="nav-link block w-full text-left p-2 rounded-md text-stone-700 font-semibold hover:bg-stone-100 transition-colors">Hobbies</a>
                <a href="#" class="nav-link block w-full text-left p-2 rounded-md text-stone-700 font-semibold hover:bg-stone-100 transition-colors">Travel Blog</a>

                <div>
                    <div id="nav-tech-blogs" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                        <h3 class="font-semibold text-stone-700">Technical Blogs</h3>
                        <span class="arrow transform transition-transform duration-200">‚ñº</span>
                    </div>
                    <div id="links-tech-blogs" class="mt-1 ml-2 space-y-2 hidden">
                        <!-- Level 2: Resiliency -->
                        <div class="nav-subcategory">
                            <div id="nav-resiliency-main" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                                <h4 class="font-semibold text-stone-600 text-sm">Resiliency</h4>
                                <span class="arrow transform transition-transform duration-200">‚ñº</span>
                            </div>
                            <div id="links-resiliency-main" class="mt-1 ml-2 space-y-2 hidden">
                                <!-- Level 3: Workload Resiliency -->
                                <div class="nav-subcategory">
                                    <div id="nav-workload-resiliency" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                                        <h5 class="font-semibold text-stone-500 text-sm">Workload Resiliency</h5>
                                        <span class="arrow transform transition-transform duration-200">‚ñº</span>
                                    </div>
                                    <div id="links-workload-resiliency" class="mt-1 ml-2 space-y-1 hidden">
                                        <!-- Level 4: Categories -->
                                        <div class="nav-subcategory">
                                             <div id="nav-core-resilience" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                                                <h6 class="font-semibold text-stone-500 text-xs">Core Resilience</h6>
                                                <span class="arrow transform transition-transform duration-200">‚ñº</span>
                                            </div>
                                            <div id="links-core-resilience" class="mt-1 ml-2 space-y-1 hidden">
                                                <a href="fault-tolerance.html" class="nav-link active-page block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Fault Tolerance</a>
                                                <a href="fault-isolation.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Fault Isolation</a>
                                                <a href="app-health.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Application Health</a>
                                                <a href="auto-recovery.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Automated Recovery</a>
                                                <a href="qos.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Quality of Service</a>
                                                <a href="resource-management.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Resource Management</a>
                                            </div>
                                        </div>
                                        <div class="nav-subcategory">
                                             <div id="nav-scaling" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                                                <h6 class="font-semibold text-stone-500 text-xs">Scaling & Availability</h6>
                                                <span class="arrow transform transition-transform duration-200">‚ñº</span>
                                            </div>
                                            <div id="links-scaling" class="mt-1 ml-2 space-y-1 hidden">
                                                <a href="horizontal-scaling-single.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Single Cluster Scaling</a>
                                                <a href="conservative-maintenance.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Conservative Maintenance</a>
                                                <a href="scaling-best-practices.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Best Practices & Pitfalls</a>
                                                <a href="horizontal-scaling-cross-cluster.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Cross-Cluster Scaling</a>
                                            </div>
                                        </div>
                                        <div class="nav-subcategory">
                                             <div id="nav-traffic" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                                                <h6 class="font-semibold text-stone-500 text-xs">Traffic Deployment</h6>
                                                <span class="arrow transform transition-transform duration-200">‚ñº</span>
                                            </div>
                                            <div id="links-traffic" class="mt-1 ml-2 space-y-1 hidden">
                                                <a href="service-discovery.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Service Discovery</a>
                                                <a href="traffic-flow.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">N-S & E-W Traffic</a>
                                                <a href="deployment-strategy.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Deployment Strategies</a>
                                                <a href="rate-limiting.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Rate Limiting</a>
                                            </div>
                                        </div>
                                        <div class="nav-subcategory">
                                             <div id="nav-validation" class="nav-category-header flex justify-between items-center p-2 rounded-md hover:bg-stone-100">
                                                <h6 class="font-semibold text-stone-500 text-xs">Validation & Benchmarking</h6>
                                                <span class="arrow transform transition-transform duration-200">‚ñº</span>
                                            </div>
                                            <div id="links-validation" class="mt-1 ml-2 space-y-1 hidden">
                                                <a href="workload-benchmarking.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Workload Benchmarking</a>
                                                <a href="chaos-engineering.html" class="nav-link block w-full text-left p-1.5 rounded-md text-stone-600 hover:bg-stone-100 text-xs">Chaos Engineering</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- Master Navigation End -->
        </aside>
        <main class="w-full p-4 md:p-8 lg:p-12">
            <header class="mb-12">
                <h1 class="text-4xl md:text-5xl font-bold text-indigo-900">Blueprint: Fault Tolerance</h1>
                <p class="mt-4 text-lg text-stone-600 max-w-4xl">Fault tolerance is the ability of a system to withstand the failure of its subsystems and continue to operate correctly. This is about ensuring continuity in the face of failure, often achieved through redundancy and dynamic response patterns like the Circuit Breaker.</p>
            </header>
            <div id="content" class="space-y-16">
                <section id="circuit-breaker">
                    <h2 class="text-3xl font-bold mb-2">The Circuit Breaker Pattern</h2>
                    <p class="text-stone-600 mb-6 max-w-3xl">The Circuit Breaker pattern is a critical fault tolerance mechanism that prevents an application from repeatedly trying to call a service that it knows is failing. It acts as a stateful proxy that trips when failure thresholds are exceeded, giving the downstream service time to recover and preventing a cascading failure. Interact with the visualization below to see its three states.</p>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div class="bg-white p-6 rounded-lg shadow-lg">
                            <h3 class="text-xl font-semibold mb-3 text-center">Circuit Breaker State Machine</h3>
                            <div id="circuit-breaker-viz" class="flex flex-col justify-around items-center h-48 p-4 rounded-md cursor-pointer transition-colors duration-300">
                                <!-- Interactive element will be rendered here by JS -->
                            </div>
                        </div>
                        <div class="space-y-4">
                            <div class="p-4 bg-green-50 border-l-4 border-green-500">
                                <h4 class="font-bold">1. Closed State</h4>
                                <p class="text-sm text-stone-600">Requests flow normally. The circuit breaker monitors for failures.</p>
                            </div>
                             <div class="p-4 bg-red-50 border-l-4 border-red-500">
                                <h4 class="font-bold">2. Open State</h4>
                                <p class="text-sm text-stone-600">After enough failures, the circuit "opens." Subsequent calls fail immediately without being attempted.</p>
                            </div>
                             <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500">
                                <h4 class="font-bold">3. Half-Open State</h4>
                                <p class="text-sm text-stone-600">After a timeout, a limited number of test requests are allowed. If they succeed, the circuit closes. If they fail, it re-opens.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    function setupCollapsibleNav(headerId, linksId) {
        const header = document.getElementById(headerId);
        if (!header) return;
        const links = document.getElementById(linksId);
        if (!links) return;
        const arrow = header.querySelector('.arrow');
        if (!arrow) return;

        header.addEventListener('click', (e) => {
            e.stopPropagation();
            links.classList.toggle('hidden');
            arrow.classList.toggle('rotate-180');
        });
    }

    // Setup all levels of navigation
    setupCollapsibleNav('nav-tech-blogs', 'links-tech-blogs');
    setupCollapsibleNav('nav-resiliency-main', 'links-resiliency-main');
    setupCollapsibleNav('nav-workload-resiliency', 'links-workload-resiliency');
    setupCollapsibleNav('nav-core-resilience', 'links-core-resilience');
    setupCollapsibleNav('nav-scaling', 'links-scaling');
    setupCollapsibleNav('nav-traffic', 'links-traffic');
    setupCollapsibleNav('nav-validation', 'links-validation');

    // Automatically open the path to the active page
    const activeLink = document.querySelector('.nav-link.active-page');
    if (activeLink) {
        let parent = activeLink.closest('.nav-subcategory, #links-tech-blogs');
        while (parent) {
            parent.classList.remove('hidden');
            const header = parent.previousElementSibling;
            if (header && header.classList.contains('nav-category-header')) {
                const arrow = header.querySelector('.arrow');
                if (arrow) arrow.classList.add('rotate-180');
            }
            parent = parent.parentElement.closest('.nav-subcategory, #links-tech-blogs');
        }
    }

    // Page-specific JS for Circuit Breaker
    if (document.getElementById('circuit-breaker-viz')) {
        const circuitBreakerViz = document.getElementById('circuit-breaker-viz');
        let circuitState = 0;
        const states = [
            { name: 'Closed', color: 'bg-green-100', border: 'border-green-300', text: 'All Good üëç', desc: 'Flowing Normally' },
            { name: 'Open', color: 'bg-red-100', border: 'border-red-300', text: 'Tripped! ‚õîÔ∏è', desc: 'Calls Failing Fast' },
            { name: 'Half-Open', color: 'bg-yellow-100', border: 'border-yellow-300', text: 'Testing... ü§î', desc: 'Sending Probe' }
        ];

        function updateCircuitBreaker() {
            const state = states[circuitState];
            circuitBreakerViz.className = `flex flex-col justify-center items-center h-48 p-4 rounded-lg shadow-inner cursor-pointer transition-colors duration-300 ${state.color} border-2 ${state.border}`;
            circuitBreakerViz.innerHTML = `
                <span class="font-bold text-3xl">${state.text}</span>
                <span class="mt-2 text-stone-700">State: ${state.name}</span>
                <span class="font-mono text-sm text-stone-500">${state.desc}</span>
                <span class="text-xs text-stone-400 mt-4">(Click to transition)</span>
            `;
        }
        
        circuitBreakerViz.addEventListener('click', () => {
            circuitState = (circuitState + 1) % states.length;
            updateCircuitBreaker();
        });
        updateCircuitBreaker();
    }
});
</script>
</body>
</html>
